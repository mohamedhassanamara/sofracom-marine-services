<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SOFRACOM Product Admin</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="header">
      <div>
        <h1>Product Catalog Admin</h1>
        <p>Review, edit, add, or remove products stored in <code>assets/data/products.json</code>. Saving will commit and push automatically.</p>
      </div>
      <div class="header-actions">
        <button id="refreshBtn" type="button">Reload Data</button>
        <button id="saveBtn" class="primary" type="button">
          Save &amp; Deploy
        </button>
      </div>
    </header>

    <main>
      <section id="status" class="status" role="status" aria-live="polite"></section>

      <section class="actions">
        <button id="addCategoryBtn" type="button">Add Category</button>
      </section>

      <section class="category-layout">
        <nav id="categoryNav" class="category-nav" aria-label="Categories"></nav>
        <section id="categories" class="categories"></section>
      </section>
    </main>

    <button
      id="scrollToBottomBtn"
      class="scroll-arrow scroll-bottom"
      type="button"
      aria-label="Jump to bottom"
    >
      ↓
    </button>
    <button
      id="scrollToTopBtn"
      class="scroll-arrow scroll-top"
      type="button"
      aria-label="Jump to top"
    >
      ↑
    </button>

    <template id="categoryTemplate">
      <article class="category">
        <header class="category-header">
          <h2></h2>
          <div class="category-actions">
            <button class="add-product" type="button">Add Product</button>
            <button class="delete-category danger" type="button">Delete Category</button>
          </div>
        </header>
        <div class="category-meta">
          <div class="form-row">
            <label>
              Display name
              <input type="text" class="category-name" />
            </label>
            <label>
              Slug
              <input type="text" class="category-slug" />
            </label>
          </div>
          <div class="form-row">
            <div class="image-field">
              <label>
                Image path
                <input type="text" class="category-image" />
              </label>
              <div class="image-dropzone category-dropzone" data-bucket="categories">
                <input type="file" accept="image/*" class="dropzone-input" hidden />
                <div class="dropzone-preview" aria-hidden="true"></div>
                <div class="dropzone-text">
                  <span class="dropzone-title">Drag &amp; drop image</span>
                  <span class="dropzone-subtitle">or click to browse</span>
                  <span class="dropzone-path"></span>
                </div>
              </div>
              <p class="dropzone-hint">Uploads are saved to <code>assets/categories</code></p>
            </div>
            <label>
              Description
              <textarea class="category-description large-textarea" rows="3"></textarea>
            </label>
          </div>
          <div class="translation-card">
            <div class="translation-header">
              <strong>Translations</strong>
              <span class="translation-hint">Localize name &amp; description</span>
            </div>
            <div class="translation-grid translation-grid-stack">
              <details class="translation-lang" data-lang="fr" open>
                <summary class="translation-summary">French (fr)</summary>
                <div class="translation-content">
                  <label>
                    Name (FR)
                    <input type="text" class="category-translation-name" data-lang="fr" />
                  </label>
                  <label>
                    Description (FR)
                    <textarea class="category-translation-description large-textarea" data-lang="fr" rows="2"></textarea>
                  </label>
                </div>
              </details>
              <details class="translation-lang" data-lang="ar">
                <summary class="translation-summary">Arabic (ar)</summary>
                <div class="translation-content">
                  <label>
                    Name (AR)
                    <input type="text" class="category-translation-name" data-lang="ar" dir="rtl" />
                  </label>
                  <label>
                    Description (AR)
                    <textarea class="category-translation-description large-textarea" data-lang="ar" rows="2" dir="rtl"></textarea>
                  </label>
                </div>
              </details>
            </div>
          </div>
        </div>
        <div class="products"></div>
      </article>
    </template>

    <template id="productTemplate">
      <div class="product">
        <div class="product-header">
          <h3></h3>
          <div class="product-header-actions">
            <button class="toggle-product" type="button">Hide details</button>
            <button class="delete-product danger" type="button">Delete</button>
          </div>
        </div>
        <div class="product-fields">
          <div class="field-row">
            <label>
              Title
              <input type="text" class="product-title" />
            </label>
            <label>
              Brand
              <input type="text" class="product-brand" />
            </label>
          </div>
          <div class="field-row">
            <label>
              Usage tags (comma separated)
              <input type="text" class="product-usage" />
            </label>
            <label>
              Price (numeric)
              <input type="number" class="product-price" min="0" step="1" />
            </label>
            <div class="stock-field">
              <label>
                Status
                <select class="product-stock">
                  <option value="in">In stock</option>
                  <option value="on-order">On order</option>
                  <option value="out">Out of stock</option>
                </select>
              </label>
            </div>
          </div>
          <label class="full">
            Description
            <textarea class="product-description large-textarea" rows="4"></textarea>
          </label>
          <div class="field-row image-upload-row">
            <div class="image-text-column">
              <label class="full">
                Images (one per line)
                <textarea class="product-images" rows="3" placeholder="assets/products/example.jpg"></textarea>
              </label>
            </div>
            <div class="image-drop-column">
              <div class="asset-dropzone-list" data-asset="images">
                <div class="asset-dropzone" data-bucket="products" data-asset="images">
                  <input type="file" accept="image/*" class="dropzone-input" hidden />
                  <div class="dropzone-preview" aria-hidden="true"></div>
                  <div class="dropzone-text">
                    <span class="dropzone-title">Drop image here or click</span>
                    <span class="dropzone-subtitle">Uploads land in <code>assets/products</code></span>
                    <span class="dropzone-path"></span>
                  </div>
                  <button type="button" class="asset-select-button">Select image</button>
                </div>
                <p class="asset-dropzone-hint">Each upload appends its path to the list above.</p>
              </div>
            </div>
          </div>
          <div class="image-preview-grid" aria-live="polite"></div>
          <div class="field-row">
            <div class="full-column">
              <label>
                Datasheet path
                <input type="text" class="product-datasheet" placeholder="assets/datasheets/example.pdf" />
              </label>
              <div class="asset-dropzone-list" data-asset="datasheet">
                <div class="asset-dropzone" data-bucket="datasheets" data-asset="datasheet">
                  <input type="file" accept=".pdf" class="dropzone-input" hidden />
                  <div class="dropzone-preview" aria-hidden="true"></div>
                  <div class="dropzone-text">
                    <span class="dropzone-title">Drop PDF here or click</span>
                    <span class="dropzone-subtitle">Saved to <code>assets/datasheets</code></span>
                    <span class="dropzone-path"></span>
                  </div>
                  <button type="button" class="asset-select-button">Select PDF</button>
                </div>
                <p class="asset-dropzone-hint">Uploads update the datasheet field above.</p>
              </div>
            </div>
          </div>
          <div class="variant-section">
            <div class="variant-header">
              <strong>Variants</strong>
              <button type="button" class="add-variant">Add variant</button>
            </div>
            <div class="variant-list"></div>
          </div>
          <div class="translation-card">
            <div class="translation-header">
              <strong>Translations</strong>
              <span class="translation-hint">Localized titles &amp; descriptions</span>
            </div>
            <div class="translation-grid translation-grid-stack">
              <details class="translation-lang" data-lang="fr" open>
                <summary class="translation-summary">French (fr)</summary>
                <div class="translation-content">
                  <label>
                    Title (FR)
                    <input type="text" class="product-translation-title" data-lang="fr" />
                  </label>
                  <label>
                    Description (FR)
                    <textarea class="product-translation-description large-textarea" data-lang="fr" rows="3"></textarea>
                  </label>
                </div>
              </details>
              <details class="translation-lang" data-lang="ar">
                <summary class="translation-summary">Arabic (ar)</summary>
                <div class="translation-content">
                  <label>
                    Title (AR)
                    <input type="text" class="product-translation-title" data-lang="ar" dir="rtl" />
                  </label>
                  <label>
                    Description (AR)
                    <textarea class="product-translation-description large-textarea" data-lang="ar" rows="3" dir="rtl"></textarea>
                  </label>
                </div>
              </details>
            </div>
          </div>
        </div>
      </div>
    </template>

    <script src="/app.js" defer></script>
  </body>
</html>
