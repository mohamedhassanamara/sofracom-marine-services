{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbook/WebstormProjects/sofracom/lib/products.js"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\nconst DATA_PATH = path.join(\n    process.cwd(),\n    'public',\n    'assets',\n    'data',\n    'products.json'\n);\n\nconst ensurePath = value => {\n    if (!value) return '';\n    return value.startsWith('/') ? value : `/${value}`;\n};\n\nconst slugify = value =>\n    (value || '')\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, '-')\n        .replace(/^-|-$/g, '');\n\nconst normalizeProduct = (product, category) => {\n    const categorySlug = category.slug || slugify(category.name);\n    const id = `${categorySlug}-${slugify(product.title)}`;\n    const rawImages =\n        Array.isArray(product.images) && product.images.length\n            ? product.images\n            : product.image\n                ? [product.image]\n                : [];\n    const images = rawImages.map(ensurePath).filter(Boolean);\n    const fallbackImage = images[0] || ensurePath(product.image) || '/logo.jpeg';\n\n    const variants = Array.isArray(product.variants)\n        ? product.variants.map(variant => ({\n              label: variant.label || 'Variant',\n              price: Number.isFinite(variant.price)\n                  ? variant.price\n                  : Number(variant.price) || 0,\n          }))\n        : [];\n\n    const price =\n        Number.isFinite(product.price) && product.price > 0\n            ? product.price\n            : variants[0]?.price || 0;\n\n    return {\n        ...product,\n        id,\n        categoryName: category.name,\n        categorySlug,\n        image: fallbackImage,\n        images: images.length ? images : [fallbackImage],\n        datasheet: ensurePath(product.datasheet),\n        variants,\n        price,\n        stock: product.stock || 'in',\n        usage: Array.isArray(product.usage) ? product.usage : [],\n    };\n};\n\nconst buildCategories = rawCategories =>\n    (rawCategories || []).map(raw => {\n        const slug = raw.slug || slugify(raw.name);\n        return {\n            ...raw,\n            slug,\n            image: ensurePath(raw.image),\n            products:\n                Array.isArray(raw.products) && raw.products.length\n                    ? raw.products.map(product =>\n                          normalizeProduct(product, { ...raw, slug })\n                      )\n                    : [],\n        };\n    });\n\nfunction loadRawData() {\n    const raw = fs.readFileSync(DATA_PATH, 'utf-8');\n    return JSON.parse(raw);\n}\n\nexport function getCategories() {\n    const parsed = loadRawData();\n    return buildCategories(parsed.categories || []);\n}\n\nexport function getCategoryBySlug(slug) {\n    if (!slug) return null;\n    const categories = getCategories();\n    return categories.find(category => category.slug === slug) || null;\n}\n\nexport function getCategorySlugs() {\n    const categories = getCategories();\n    return categories.map(category => category.slug);\n}\n\nexport function getProductById(productId) {\n    if (!productId) return null;\n    const categories = getCategories();\n    for (const category of categories) {\n        const product = category.products.find(prod => prod.id === productId);\n        if (product) {\n            return { product, category };\n        }\n    }\n    return null;\n}\n\nexport function getProductPaths() {\n    const categories = getCategories();\n    return categories.flatMap(category =>\n        category.products.map(product => ({\n            categorySlug: category.slug,\n            productId: product.id,\n        }))\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}