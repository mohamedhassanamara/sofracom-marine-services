{"version":3,"sources":["turbopack:///[project]/lib/products.js","turbopack:///[project]/pages/products/index.js","turbopack:///[project]/node_modules/next/dist/esm/build/templates/pages.js"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\nconst DATA_PATH = path.join(\n    process.cwd(),\n    'public',\n    'assets',\n    'data',\n    'products.json'\n);\n\nconst ensurePath = value => {\n    if (!value) return '';\n    return value.startsWith('/') ? value : `/${value}`;\n};\n\nconst slugify = value =>\n    (value || '')\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, '-')\n        .replace(/^-|-$/g, '');\n\nconst normalizeProduct = (product, category) => {\n    const categorySlug = category.slug || slugify(category.name);\n    const id = `${categorySlug}-${slugify(product.title)}`;\n    const rawImages =\n        Array.isArray(product.images) && product.images.length\n            ? product.images\n            : product.image\n                ? [product.image]\n                : [];\n    const images = rawImages.map(ensurePath).filter(Boolean);\n    const fallbackImage = images[0] || ensurePath(product.image) || '/logo.jpeg';\n\n    const variants = Array.isArray(product.variants)\n        ? product.variants.map(variant => ({\n              label: variant.label || 'Variant',\n              price: Number.isFinite(variant.price)\n                  ? variant.price\n                  : Number(variant.price) || 0,\n          }))\n        : [];\n\n    const price =\n        Number.isFinite(product.price) && product.price > 0\n            ? product.price\n            : variants[0]?.price || 0;\n\n    return {\n        ...product,\n        id,\n        categoryName: category.name,\n        categorySlug,\n        image: fallbackImage,\n        images: images.length ? images : [fallbackImage],\n        datasheet: ensurePath(product.datasheet),\n        variants,\n        price,\n        stock: product.stock || 'in',\n        usage: Array.isArray(product.usage) ? product.usage : [],\n    };\n};\n\nconst buildCategories = rawCategories =>\n    (rawCategories || []).map(raw => {\n        const slug = raw.slug || slugify(raw.name);\n        return {\n            ...raw,\n            slug,\n            image: ensurePath(raw.image),\n            products:\n                Array.isArray(raw.products) && raw.products.length\n                    ? raw.products.map(product =>\n                          normalizeProduct(product, { ...raw, slug })\n                      )\n                    : [],\n        };\n    });\n\nfunction loadRawData() {\n    const raw = fs.readFileSync(DATA_PATH, 'utf-8');\n    return JSON.parse(raw);\n}\n\nexport function getCategories() {\n    const parsed = loadRawData();\n    return buildCategories(parsed.categories || []);\n}\n\nexport function getCategoryBySlug(slug) {\n    if (!slug) return null;\n    const categories = getCategories();\n    return categories.find(category => category.slug === slug) || null;\n}\n\nexport function getCategorySlugs() {\n    const categories = getCategories();\n    return categories.map(category => category.slug);\n}\n\nexport function getProductById(productId) {\n    if (!productId) return null;\n    const categories = getCategories();\n    for (const category of categories) {\n        const product = category.products.find(prod => prod.id === productId);\n        if (product) {\n            return { product, category };\n        }\n    }\n    return null;\n}\n\nexport function getProductPaths() {\n    const categories = getCategories();\n    return categories.flatMap(category =>\n        category.products.map(product => ({\n            categorySlug: category.slug,\n            productId: product.id,\n        }))\n    );\n}\n","import Link from 'next/link';\nimport { getCategories } from '../../lib/products';\n\nexport function getStaticProps() {\n    const categories = getCategories();\n    return {\n        props: {\n            categories,\n        },\n    };\n}\n\nexport default function ProductsIndex({ categories = [] }) {\n    return (\n        <main className=\"max-w-7xl mx-auto px-6 py-12\">\n            <div className=\"text-center mb-10\">\n                <p className=\"text-sm text-gray-500 uppercase tracking-wide\">SOFRACOM Catalog</p>\n                <h1 className=\"text-3xl sm:text-4xl font-extrabold text-gray-900\">\n                    Explore categories & products\n                </h1>\n                <p className=\"text-gray-600 mt-2 max-w-2xl mx-auto\">\n                    Browse the latest antifouling systems, sealants, oils, batteries, and hardware supplied from Monastir.\n                </p>\n            </div>\n            <div className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {categories.map(category => (\n                    <Link\n                        key={category.slug}\n                        href={`/products/${category.slug}`}\n                        className=\"product-card space-y-4 p-6 bg-white rounded-3xl shadow hover:shadow-xl transition transform hover:-translate-y-1\"\n                        data-tilt\n                    >\n                        <img src={category.image} alt={category.name} className=\"card-img\" />\n                        <div>\n                            <h2 className=\"text-lg font-semibold text-gray-900\">{category.name}</h2>\n                            <p className=\"text-sm text-gray-600 mt-2 leading-relaxed\">{category.description}</p>\n                        </div>\n                        <div className=\"flex items-center justify-between text-xs uppercase tracking-wide\">\n                            <span>{category.products.length} products</span>\n                            <span className=\"tag px-3 py-1 rounded-full text-xs bg-blue-100 text-blue-700\">View</span>\n                        </div>\n                    </Link>\n                ))}\n            </div>\n        </main>\n    );\n}\n","import { PagesRouteModule } from \"next/dist/esm/server/route-modules/pages/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { hoist } from \"next/dist/esm/build/templates/helpers\";\n// Import the app and document modules.\nimport * as document from \"INNER_DOCUMENT\";\nimport * as app from \"INNER_APP\";\n// Import the userland code.\nimport * as userland from \"INNER_PAGE\";\nimport { getHandler } from \"next/dist/esm/server/route-modules/pages/pages-handler\";\n// Re-export the component (should be the default export).\nexport default hoist(userland, 'default');\n// Re-export methods.\nexport const getStaticProps = hoist(userland, 'getStaticProps');\nexport const getStaticPaths = hoist(userland, 'getStaticPaths');\nexport const getServerSideProps = hoist(userland, 'getServerSideProps');\nexport const config = hoist(userland, 'config');\nexport const reportWebVitals = hoist(userland, 'reportWebVitals');\n// Re-export legacy methods.\nexport const unstable_getStaticProps = hoist(userland, 'unstable_getStaticProps');\nexport const unstable_getStaticPaths = hoist(userland, 'unstable_getStaticPaths');\nexport const unstable_getStaticParams = hoist(userland, 'unstable_getStaticParams');\nexport const unstable_getServerProps = hoist(userland, 'unstable_getServerProps');\nexport const unstable_getServerSideProps = hoist(userland, 'unstable_getServerSideProps');\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesRouteModule({\n    definition: {\n        kind: RouteKind.PAGES,\n        page: \"/products/index\",\n        pathname: \"/products\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    components: {\n        // default export might not exist when optimized for data only\n        App: app.default,\n        Document: document.default\n    },\n    userland\n});\nexport const handler = getHandler({\n    srcPage: \"/products/index\",\n    config,\n    userland,\n    routeModule,\n    getStaticPaths,\n    getStaticProps,\n    getServerSideProps\n});\n\n//# sourceMappingURL=pages.js.map\n"],"names":[],"mappings":"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","ignoreList":[2]}